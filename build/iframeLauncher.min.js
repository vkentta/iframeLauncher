!function(){var t={init:function(t){var e=this.setOptions(t),i=document.createElement("IFRAME"),n=this.initButton(i,e),s={options:e,iframe:i,button:n};return i.classList.add(e.cssClass,e.position,e.transition,e.size),i.src=e.src,this.setButton(s,s.options.texts.open,this.loadIframe.bind(this,s)),{openIframe:this.loadIframe.bind(this,s),closeIframe:this.closeIframe.bind(this,s),setIframeMessageListener:this.setIframeMessageListener.bind(this,s),deinit:this.deinit.bind(this,s)}},deinit:function(t){t.button&&t.button.classList&&this.hideButton(t.button),this.closeIframe(t),setTimeout(this.deleteSelf.bind(this,t),1e3)},deleteSelf:function(t){t.iframe.parentNode&&t.iframe.parentNode.removeChild(t.iframe),t.button&&t.button.parentNode&&t.button.parentNode.removeChild(t.button),delete t.iframe,delete t.button},initButton:function(t,e){var i;return e.button&&(i=document.createElement("BUTTON"),i.classList.add(e.cssClass,e.position,e.transition),document.body.appendChild(i),setTimeout(this.showButton.bind(this,i),0)),i},showButton:function(t){t.classList.add("visible")},hideButton:function(t){t.classList.remove("visible")},setButton:function(t,e,i){t.options.button&&(t.button.textContent=e,t.button.onclick=i)},setOptions:function(t){return{cssClass:"iframe-launcher",src:t&&t.src?t.src:window.location,texts:{open:t&&t.texts&&t.texts.open?t.texts.open:"Open iframe",opening:t&&t.texts&&t.texts.opening?t.texts.opening:"Opening iframe...",close:t&&t.texts&&t.texts.close?t.texts.close:"Close iframe"},button:t&&void 0!==t.button?t.button:!0,position:t&&t.position?t.position:"right",transition:t&&t.transition?t.transition:"slide",size:t&&t.size?t.size:"half"}},loadIframe:function(t){t.iframe.onload=this.iframeLoaded.bind(this,t),this.setButton(t,t.options.texts.opening,null),document.body.appendChild(t.iframe)},iframeLoaded:function(t){t.iframe.onload=null,this.loadIframe=this.openIframe,this.openIframe(t)},openIframe:function(t){t.iframe.classList.add("visible"),this.setButton(t,t.options.texts.close,this.closeIframe.bind(this,t))},closeIframe:function(t){t.iframe.classList.remove("visible"),this.setButton(t,t.options.texts.open,this.openIframe.bind(this,t))},setIframeMessageListener:function(t,e,i){var n=document.createElement("a");n.href=t.options.src;var s={iframeHostname:n.hostname,eventData:e,callback:i};window.addEventListener("message",function(t,e){var i=e.origin||e.originalEvent.origin;-1!==i.indexOf(t.iframeHostname)&&e.data==t.eventData&&t.callback()}.bind(null,s),!1)}};window.iframeLauncher=t.init.bind(t)}();
